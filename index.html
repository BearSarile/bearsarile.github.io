<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Senior Game Programmer Portfolio</title>
  <meta name="description" content="Portfolio of a Senior Game Programmer showcasing shipped titles, gameplay systems, and engine tools." />
  <style>
    :root{
      --bg:#0f1115;--card:#121317;--muted:#9aa0a6;--accent:#61dafb;--max-width:1100px;
      font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      color:#e6edf3;background:linear-gradient(180deg,#05060a 0%, #0b0e12 100%);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:inherit}
    .container{max-width:var(--max-width);margin:0 auto;padding:24px}
    .site-header{padding:28px 0 12px}
    .site-header h1{margin:0;font-size:1.6rem}
    .site-header p{margin:6px 0 0;color:var(--muted)}
    .filters{margin:14px auto 0;padding:0 24px}
    .filter-chip{padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,0.04);cursor:pointer;background:transparent;color:var(--muted);font-size:0.85rem}
    .filter-chip.active{background:var(--accent);color:#071018;border-color:transparent}
    #projects-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin-top:18px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.03);padding:14px;border-radius:10px;display:flex;flex-direction:column;gap:12px}
    .thumb{width:100%;height:160px;object-fit:cover;border-radius:8px;background:#0b0b0b}
    .card h3{margin:0;font-size:1.05rem}
    .meta{display:flex;gap:8px;flex-wrap:wrap;color:var(--muted);font-size:0.9rem}
    .actions{margin-top:auto;display:flex;gap:8px}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 10px;border-radius:8px;color:var(--accent);cursor:pointer;font-weight:600}
    .badge{background:rgba(255,255,255,0.02);padding:6px 8px;border-radius:6px;font-size:0.8rem;color:var(--muted)}
    .modal{display:none;position:fixed;inset:0;z-index:60;align-items:center;justify-content:center}
    .modal[aria-hidden="false"]{display:flex}
    .modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,0.6)}
    .modal-content{position:relative;z-index:62;background:var(--card);border-radius:10px;max-width:1000px;width:96%;max-height:90vh;overflow:auto;padding:18px;border:1px solid rgba(255,255,255,0.04)}
    .modal-close{position:absolute;right:12px;top:10px;background:transparent;border:0;color:var(--muted);font-size:20px;cursor:pointer}
    .gallery{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
    .gallery img, .gallery video, .gallery iframe{max-width:32%;border-radius:8px;object-fit:cover}
    @media (max-width:700px){ .gallery img, .gallery video, .gallery iframe{max-width:48%} .thumb{height:130px} .modal-content{padding:14px} }
    .tech-list{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
    .tech{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:6px;font-size:0.85rem;color:var(--muted)}
    .empty-note{padding:20px;text-align:center;color:var(--muted)}
    a{color:var(--accent)}
    .footer-contacts{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .contact-link{display:inline-flex;gap:8px;align-items:center;padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);color:var(--muted);text-decoration:none;background:transparent}
    .contact-link:hover{color:var(--accent);border-color:rgba(97,218,251,0.14)}
    .contact-icon{width:18px;height:18px;display:inline-block;flex:0 0 18px}
    .contact-label{font-size:0.95rem;color:var(--muted)}
    .footer-note{margin-top:8px;color:var(--muted);font-size:0.9rem}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1 id="site-name">Senior Game Programmer</h1>
      <p id="site-tagline">Gameplay systems, engine tooling, performance</p>
    </div>
  </header>
  
  <main class="container">
    <section id="projects-grid" aria-label="Projects"></section>
    <div id="empty" class="empty-note" style="display:none">No projects match your filters.</div>
  </main>

  <div id="project-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-content" role="document">
      <button class="modal-close" aria-label="Close project">Ã—</button>
      <article id="project-detail"></article>
    </div>
    <div class="modal-backdrop"></div>
  </div>

  <footer class="site-footer">
    <div class="container">
      <div id="footer-contacts" class="footer-contacts" aria-label="Contact links"></div>
      <div class="footer-note" id="footer-note">Built with Unity spirit. Hosted on GitHub Pages.</div>
    </div>
  </footer>

  <!-- Inline project data -->
  <script id="projects-data" type="application/json">
  {
    "site": {
      "name": "Bear Sarile",
      "tagline": "Senior Unity Game Developer"
    },
    "projects": [
      {
        "id": "spongebob-bubblepop",
        "title": "SpongeBob: Bubble Pop",
        "role": "Project Lead Software Engineer",
        "year": "2024-2025",
        "publisher": "Netflix",
        "status": "Discontinued",
        "stores": { "steam": "null", "google_play": null, "app_store": null },
        "visibleBadges": ["role", "year", "publisher", "status"],
        "shortDescription": "Bubble Pop F.U.N. published by Netflix",
        "features": ["----", "---", "---"],
        "technologies": ["Unity 20--", "C#", "Jenkins"],
        "media": {
          "images": [
            "assets/spongebob-bubblepop/screenshots/1.jpg", 
            "assets/spongebob-bubblepop/screenshots/2.jpg",
            "assets/spongebob-bubblepop/screenshots/3.jpg",
            "assets/spongebob-bubblepop/screenshots/4.jpg",
            "assets/spongebob-bubblepop/screenshots/5.jpg",
            "assets/spongebob-bubblepop/screenshots/6.jpg",
            "assets/spongebob-bubblepop/screenshots/7.jpg",
            "assets/spongebob-bubblepop/screenshots/8.jpg",
            "assets/spongebob-bubblepop/screenshots/9.jpg",
            "assets/spongebob-bubblepop/screenshots/10.jpg",
            "assets/spongebob-bubblepop/screenshots/11.jpg",
            "assets/spongebob-bubblepop/screenshots/12.jpg",
            "assets/spongebob-bubblepop/screenshots/13.jpg"
          ],
          "videos": [
            { "type": "hosted", "src": "assets/spongebob-bubblepop/rec1.mp4" },
            { "type": "youtube", "src": "https://www.youtube.com/embed/---" }
          ]
        },
        "notes": "Project Lead - Tic Toc Games Inc"
      },
      {
        "id": "potion-punch-2",
        "title": "Potion Punch 2",
        "role": "Senior Engineer",
        "year": "2018-2021",
        "publisher": "Monstronauts",
        "status": "Released",
        "stores": { "steam": null, "google_play": "https://play.google.com/store/apps/details?id=com.monstronauts.potionpunch2&hl=en&gl=US", "app_store": "https://apps.apple.com/us/app/potion-punch-2/id1463550435" },
        "visibleBadges": ["role", "year", "publisher", "status"],
        "shortDescription": "Bubble Pop",
        "features": ["Extensive Level Editor", "Tutorial and Dialogue Systems"],
        "technologies": ["Unity", "C#", "Odin Inspector"],
        "media": {
          "images": ["assets/pp2/1.jpg", "assets/pp2/2.jpg", "assets/pp2/3.jpg"],
          "videos": [
            { "type": "hosted", "src": "assets/pp2/pp2.mp4" },
            { "type": "youtube", "src": "https://www.youtube.com/embed/---" }
          ]
        },
        "notes": "One of two main programmers during development and was able to pass the project to junior developers for Live Ops with the help of an extensive level editor"
      },
      {
        "id": "grave-mania-2",
        "title": "Grave Mania: Pandemic Pandemonium",
        "role": "Systems Programmer",
        "year": 2013,
        "publisher": "Big Fish Games",
        "status": "Archived",
        "stores": { "steam": "https://store.steampowered.com/app/514770/Grave_Mania_Pandemic_Pandemonium/", "google_play": null, "app_store": null },
        "visibleBadges": ["role", "year", "status"],
        "shortDescription": "Time Management Game Running a funeral parlor for zombies.",
        "features": ["---", "---"],
        "technologies": ["Unity", "C#"],
        "media": { "images": [""], "videos": [] },
        "notes": "Developed by Anino Games Inc"
      },
      {
        "id": "grave-mania",
        "title": "Grave Mania: Undead Fever",
        "role": "Systems Programmer",
        "year": 2012,
        "publisher": "Big Fish Games",
        "status": "Archived",
        "stores": { "steam": "https://store.steampowered.com/app/465970/Grave_Mania_Undead_Fever/", "google_play": null, "app_store": null },
        "visibleBadges": ["role", "year", "status"],
        "shortDescription": "Time Management Game Running a funeral parlor for zombies.",
        "features": ["----", "----"],
        "technologies": ["Unity", "C#"],
        "media": { "images": [""], "videos": [] },
        "notes": "Developed by Anino Games Inc"
      }
    ],
    "contacts": {
      "linkedin": "https://ph.linkedin.com/in/bearsarile",
      "github": "https://github.com/BearSarile",
      "email": "mailto:edgar.sarile@gmail.com"
    }
  }
  </script>

  <script>
    /* Minimal JS: reads inline JSON (works without a server)*/
    function $(sel){ return document.querySelector(sel); }
    function escapeHtml(s=''){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    let DATA = null;
    try {
      DATA = JSON.parse(document.getElementById('projects-data').textContent);
    } catch(e) {
      console.error('Invalid inline JSON in #projects-data', e);
      DATA = { site:{ name:'Portfolio (invalid data)' }, projects: [] };
    }

    let APP = { year:'', status:'', techs: new Set(), q:'' };
    let APP_DATA = DATA;

    function createCard(p){
      const el = document.createElement('article');
      el.className = 'card';

      // Default badge order when not specified
      const defaultBadges = ['role','year','status'];
      const badges = Array.isArray(p.visibleBadges) && p.visibleBadges.length
              ? p.visibleBadges
              : defaultBadges;

      // Helper to render individual badge
      function badgeHtml(key){
        if(key === 'role' && p.role) return `<span class="badge">${escapeHtml(p.role)}</span>`;
        if(key === 'year' && p.year) return `<span class="badge">${escapeHtml(String(p.year))}</span>`;
        if(key === 'status' && p.status) return `<span class="badge">${escapeHtml(p.status)}</span>`;
        if(key === 'publisher' && p.status) return `<span class="badge">${escapeHtml(p.publisher)}</span>`;
        if(key === 'store'){
          const s = p.stores || {};
          if(s.steam || s.google_play || s.app_store) return `<span class="badge">Store</span>`;
        }
        return '';
      }

      const thumb = p.media?.images?.[0] || '';

      const badgesHtml = badges.map(b => badgeHtml(b)).filter(Boolean).join('');

      el.innerHTML = `
    <img class="thumb" loading="lazy" alt="${escapeHtml(p.title)} thumbnail" src="${escapeHtml(thumb)}">
    <h3>${escapeHtml(p.title)}</h3>
    <div class="meta">${badgesHtml}</div>
    <p style="color:var(--muted);margin:8px 0 0">${escapeHtml(p.shortDescription || '')}</p>
    <div class="actions">
      <button class="btn view" data-id="${p.id}">View details</button>
    </div>
  `;
      return el;
    }

    function projectMatches(p){
      if(APP.year && String(p.year) !== String(APP.year)) return false;
      if(APP.status && String(p.status) !== String(APP.status)) return false;
      if(APP.techs.size){
        if(!((p.technologies||[]).some(t => APP.techs.has(t)))) return false;
      }
      if(APP.q){
        const hay = [p.title,p.shortDescription,(p.features||[]).join(' '),(p.technologies||[]).join(' ')].join(' ').toLowerCase();
        if(!hay.includes(APP.q)) return false;
      }
      return true;
    }

    function renderProjects(data){
      document.getElementById('site-name').textContent = data.site?.name || 'Portfolio';
      document.getElementById('site-tagline').textContent = data.site?.tagline || '';
      const grid = $('#projects-grid'); grid.innerHTML = '';
      let count = 0;
      data.projects.forEach(p => { if(projectMatches(p)){ grid.appendChild(createCard(p)); count++; }});
      $('#empty').style.display = count ? 'none' : 'block';
      grid.querySelectorAll('.view').forEach(b => b.addEventListener('click', ()=> openModalById(b.dataset.id, data)));
      // deep link if hash present
      const hash = location.hash.replace('#','');
      if(hash) setTimeout(()=>openModalById(hash, data), 40);
    }

    function renderFooterContacts(data){
      const container = document.getElementById('footer-contacts');
      container.innerHTML = '';
      const c = data.contacts || {};
      const items = [];
      if(c.linkedin) items.push({ href: c.linkedin, label: 'LinkedIn', icon: svgLinkedIn() });
      if(c.github)   items.push({ href: c.github,   label: 'GitHub',   icon: svgGitHub() });
      if(c.email)    items.push({ href: c.email,    label: 'Email',    icon: svgEmail() });
      if(c.twitter)  items.push({ href: c.twitter,  label: 'Twitter',  icon: svgTwitter() });
      if(items.length === 0){
        container.innerHTML = '<span class="contact-label" style="color:var(--muted)">No contact links provided</span>';
        return;
      }
      for(const it of items){
        const a = document.createElement('a');
        a.className = 'contact-link';
        a.href = it.href;
        a.target = it.href.startsWith('mailto:') ? '_self' : '_blank';
        a.rel = it.href.startsWith('mailto:') ? '' : 'noopener';
        a.innerHTML = `<span class="contact-icon" aria-hidden="true">${it.icon}</span><span class="contact-label">${it.label}</span>`;
        container.appendChild(a);
      }
    }

    // Simple inline SVGs for icons
    function svgLinkedIn(){ return `<svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18" xmlns="http://www.w3.org/2000/svg"><path d="M4.98 3.5C4.98 4.88 3.86 6 2.48 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM.5 8.5h4V24h-4V8.5zM8.5 8.5h3.84v2.07h.06c.53-1 1.82-2.07 3.75-2.07 4.01 0 4.75 2.64 4.75 6.07V24h-4v-7.5c0-1.79-.03-4.09-2.5-4.09-2.5 0-2.88 1.95-2.88 3.98V24h-4V8.5z"/></svg>`; }
    function svgGitHub(){ return `<svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18" xmlns="http://www.w3.org/2000/svg"><path d="M12 .5C5.65.5.5 5.65.5 12c0 5.08 3.29 9.39 7.86 10.92.57.1.78-.25.78-.55 0-.27-.01-1.16-.02-2.1-3.2.7-3.88-1.54-3.88-1.54-.52-1.32-1.27-1.67-1.27-1.67-1.04-.71.08-.7.08-.7 1.15.08 1.75 1.18 1.75 1.18 1.02 1.75 2.68 1.24 3.33.95.1-.74.4-1.24.72-1.53-2.56-.29-5.25-1.28-5.25-5.69 0-1.26.45-2.29 1.18-3.1-.12-.29-.51-1.47.11-3.06 0 0 .96-.31 3.14 1.18.91-.25 1.88-.38 2.85-.38.97 0 1.94.13 2.85.38 2.18-1.49 3.14-1.18 3.14-1.18.62 1.59.23 2.77.11 3.06.73.81 1.18 1.84 1.18 3.1 0 4.42-2.7 5.4-5.27 5.68.41.36.78 1.08.78 2.18 0 1.57-.01 2.84-.01 3.23 0 .3.21.66.79.55C20.71 21.39 24 17.08 24 12 24 5.65 18.35.5 12 .5z"/></svg>`; }
    function svgEmail(){ return `<svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18" xmlns="http://www.w3.org/2000/svg"><path d="M12 13.5L.5 6V18c0 1.1.9 2 2 2h19c1.1 0 2-.9 2-2V6l-11.5 7.5zM12 11L24 3.5V6c0-1.1-.9-2-2-2H2C.9 4 0 4.9 0 6v-2.5L12 11z"/></svg>`; }
    function svgTwitter(){ return `<svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18" xmlns="http://www.w3.org/2000/svg"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.89-.53 1.57-1.37 1.88-2.37-.84.5-1.78.86-2.78 1.05C18.6 4.1 17.44 3.5 16.16 3.5c-1.73 0-3.13 1.4-3.13 3.12 0 .24.03.48.08.71C9.7 7.19 6.38 5.38 4.21 2.9c-.27.46-.42 1-.42 1.57 0 1.08.55 2.03 1.39 2.59-.64-.02-1.24-.2-1.76-.49v.05c0 1.5 1.07 2.76 2.49 3.05-.26.07-.53.11-.81.11-.2 0-.4-.02-.59-.06.4 1.25 1.56 2.16 2.94 2.19-1.08.85-2.44 1.36-3.92 1.36-.25 0-.5-.02-.75-.05C6.81 17.26 9.07 18 11.5 18c6.02 0 9.32-4.99 9.32-9.32v-.42C21.8 7.6 22.18 6.83 22.46 6z"/></svg>`; }

    document.addEventListener('DOMContentLoaded', ()=>{
      renderFooterContacts(APP_DATA || DATA || {});
    });


    function openModalById(id, data){
      const p = data.projects.find(x=>x.id===id); if(!p) return;
      const container = document.getElementById('project-detail');
      container.innerHTML = `
        <h2>${escapeHtml(p.title)}</h2>
        <div class="meta"><span class="badge">${escapeHtml(p.role)}</span><span class="badge">${p.year||''}</span><span class="badge">${escapeHtml(p.status)}</span></div>
        <p style="margin-top:8px">${escapeHtml(p.shortDescription||'')}</p>
        <h4>Features</h4><ul>${(p.features||[]).map(f=>`<li>${escapeHtml(f)}</li>`).join('')}</ul>
        <h4>Technologies</h4><div class="tech-list">${(p.technologies||[]).map(t=>`<span class="tech">${escapeHtml(t)}</span>`).join('')}</div>
        <div id="store-links" style="margin-top:12px"></div>
        <div class="gallery" id="gallery"></div>
        <p style="color:var(--muted);margin-top:12px">${escapeHtml(p.notes||'')}</p>
      `;
      renderStores(p);
      renderMedia(p);
      const modal = document.getElementById('project-modal'); modal.setAttribute('aria-hidden','false'); location.hash = p.id;
    }

    function renderStores(p){
      const c = document.getElementById('store-links'); const s = p.stores||{}; const items = [];
      if(s.steam) items.push(`<a class="btn" href="${s.steam}" target="_blank" rel="noopener">Steam</a>`);
      if(s.google_play) items.push(`<a class="btn" href="${s.google_play}" target="_blank" rel="noopener">Google Play</a>`);
      if(s.app_store) items.push(`<a class="btn" href="${s.app_store}" target="_blank" rel="noopener">App Store</a>`);
      if(!items.length) items.push(`<span class="badge">Archived / No store listing</span>`);
      c.innerHTML = items.join(' ');
    }

    function renderMedia(p){
      const g = document.getElementById('gallery'); g.innerHTML = '';
      (p.media?.images||[]).forEach(src=>{
        const img = document.createElement('img'); img.loading='lazy'; img.alt = `${p.title} screenshot`; img.src = src; g.appendChild(img);
      });
      (p.media?.videos||[]).forEach(v=>{
        if(v.type === 'hosted'){
          const vid = document.createElement('video'); vid.controls = true; vid.muted = true; vid.preload = 'metadata'; vid.src = v.src; g.appendChild(vid);
        } else if(v.type === 'youtube' || v.type === 'vimeo'){
          const ifr = document.createElement('iframe'); ifr.src = v.src; ifr.width='480'; ifr.height='270';
          ifr.setAttribute('allow','accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
          ifr.loading = 'lazy'; g.appendChild(ifr);
        }
      });
    }

    function closeModal(){
      document.getElementById('project-modal').setAttribute('aria-hidden','true');
      try { history.replaceState(null,'',location.pathname); } catch(e){}
    }

    document.addEventListener('click', e=>{
      if(e.target.matches('.modal-close')) closeModal();
      if(e.target.classList.contains('modal-backdrop')) closeModal();
    });
    document.addEventListener('keydown', e=>{ if(e.key === 'Escape') closeModal(); });

    // init
    (function init(){
      try 
      { 
        // populateFilters(APP_DATA);
        renderProjects(APP_DATA); 
      } 
      catch(e)
      { 
        console.error('Render error', e); 
        document.body.innerHTML = '<pre style="color:#f66;padding:20px">Render error: '+e.message+'</pre>'; 
      }
    })();
  </script>
</body>
</html>
